(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[12],{132:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n(55);function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],a=!0,r=!1,c=void 0;try{for(var i,o=e[Symbol.iterator]();!(a=(i=o.next()).done)&&(n.push(i.value),!t||n.length!==t);a=!0);}catch(s){r=!0,c=s}finally{try{a||null==o.return||o.return()}finally{if(r)throw c}}return n}}(e,t)||Object(a.a)(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},136:function(e,t,n){"use strict";n.d(t,"g",(function(){return l})),n.d(t,"f",(function(){return p})),n.d(t,"d",(function(){return m})),n.d(t,"b",(function(){return f})),n.d(t,"c",(function(){return d})),n.d(t,"a",(function(){return b})),n.d(t,"e",(function(){return v})),n.d(t,"h",(function(){return E}));var a=n(21),r=n.n(a),c=n(32),i=n(8),o=n(20),s=n.n(o),u=n(28),l=function(){return function(){var e=Object(c.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.a.get("/api/v1/posts");case 3:n=e.sent,t({type:i.a.FETCH_POSTS,payload:n.data}),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),t({type:i.a.FETCH_POSTS_FAILED}),t(Object(u.b)(e.t0.response.data.message,"danger"));case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},p=function(e){return function(){var t=Object(c.a)(r.a.mark((function t(n){var a;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,s.a.get("/api/v1/posts/".concat(e));case 3:a=t.sent,n({type:i.a.FETCH_A_POST,payload:a.data}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),n({type:i.a.FETCH_A_POST_FAILED});case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},m=function(e){return function(){var t=Object(c.a)(r.a.mark((function t(n){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,s.a.delete("/api/v1/posts/".concat(e));case 3:t.sent,n({type:i.a.DELETE_POST,payload:e}),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),n({type:i.a.DELETE_POST_FAILED}),n(Object(u.b)(t.t0.response.data.message,"danger"));case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},f=function(e){return function(){var t=Object(c.a)(r.a.mark((function t(n){var a;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,s.a.post("/api/v1/posts/".concat(e,"/like"));case 3:a=t.sent,n({type:i.a.UPDATE_LIKES,payload:{id:e,data:a.data}}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),n(Object(u.b)(t.t0.response.data.message,"danger"));case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},d=function(e){return function(){var t=Object(c.a)(r.a.mark((function t(n){var a,c,o;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a={headers:{"Content-Type":"application/json"}},c=JSON.stringify({text:e}),t.prev=2,t.next=5,s.a.post("/api/v1/posts",c,a);case 5:o=t.sent,n({type:i.a.CREATE_POST,payload:o.data}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),n(Object(u.b)(t.t0.response.data.message,"danger"));case 12:case"end":return t.stop()}}),t,null,[[2,9]])})));return function(e){return t.apply(this,arguments)}}()},b=function(e,t){return function(){var n=Object(c.a)(r.a.mark((function n(a){var c,o,l;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c=JSON.stringify({text:t}),o={headers:{"Content-Type":"application/json"}},n.prev=2,n.next=5,s.a.post("/api/v1/posts/".concat(e,"/comments"),c,o);case 5:l=n.sent,a({type:i.a.ADD_COMMENT,payload:l.data}),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(2),a(Object(u.b)(n.t0.response.data.message,"danger"));case 12:case"end":return n.stop()}}),n,null,[[2,9]])})));return function(e){return n.apply(this,arguments)}}()},v=function(e,t){return function(){var n=Object(c.a)(r.a.mark((function n(a){return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,s.a.delete("/api/v1/posts/".concat(e,"/").concat(t));case 3:a({type:i.a.REMOVE_COMMENT,payload:t}),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),a(Object(u.b)(n.t0.response.data.message,"danger"));case 9:case"end":return n.stop()}}),n,null,[[0,6]])})));return function(e){return n.apply(this,arguments)}}()},E=function(e){return function(){var t=Object(c.a)(r.a.mark((function t(n){var a;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:i.a.GET_LIKES_START}),t.next=4,s.a.get("/api/v1/posts/".concat(e,"/likes"));case 4:a=t.sent,n({type:i.a.GET_LIKES,payload:a.data}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),n({type:i.a.GET_LIKES_FAILED});case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()}},182:function(e,t,n){"use strict";var a=n(0),r=n.n(a),c=n(139),i=n.n(c),o=n(12),s=n(22),u=n(136),l=n(52),p={hidden:{x:"100vw",opacity:0},visible:{x:0,opacity:1,transition:{type:"spring"}},exit:{x:"-100vw",transition:{ease:"easeInOut"}}};t.a=function(e){var t=e._id,n=e.text,a=e.likes,c=e.comments,m=e.date,f=e.user,d=e.showActions,b=e.toggleModal,v=e.postId,E=Object(s.b)(),y=Object(s.c)((function(e){return e.auth}));return r.a.createElement(l.b.div,{className:"post bg-white p-1 my-1",variants:p,initial:"hidden",animate:"visible",exit:"exit"},r.a.createElement("div",{className:"post__user"},r.a.createElement(o.b,{to:"/profile/".concat(f._id)},r.a.createElement("img",{className:"round-img",src:"/".concat(f&&f.avatar),alt:""}),r.a.createElement("h4",null,f&&f.name))),r.a.createElement("div",{className:"post__data"},r.a.createElement("p",{className:"my-1"},n),r.a.createElement(i.a,{format:"YYYY-MM-DD h:mm a",className:"time"},m)),d&&r.a.createElement("div",{className:"post__actions"},r.a.createElement("div",{className:"post__actions__like"},a.length>0&&r.a.createElement("button",{type:"button",className:"btn btn-light free",onClick:function(){b(),v(t)}},r.a.createElement("i",{className:"fas fa-thumbs-up"})," ",r.a.createElement("span",null,a.length," ")),a.find((function(e){return e.user===y.user._id}))?r.a.createElement("button",{className:"btn btn-liked",onClick:function(){return E(Object(u.b)(t))}},"liked"):r.a.createElement("button",{className:"btn btn-light btn-unliked",onClick:function(){return E(Object(u.b)(t))}},"like")),r.a.createElement(o.b,{to:"/posts/".concat(t),className:"btn btn-primary"},"Discussion"," ",c.length>0&&r.a.createElement("span",{className:"comment-count"},c.length)),y.isAuthenticated&&y.user._id===f._id||y.user&&"admin"===y.user.role?r.a.createElement("button",{type:"button",className:"btn btn-danger",onClick:function(){return E(Object(u.d)(t))}},r.a.createElement("i",{className:"fas fa-times"})):""))}},334:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(53),i=n(136),o=n(22),s=n(4),u=n(12),l=n(182),p=n(132),m=function(e){var t=e.postId,n=Object(a.useState)(""),c=Object(p.a)(n,2),s=c[0],u=c[1],l=Object(o.b)();return r.a.createElement("div",{className:"post-form"},r.a.createElement("div",{className:"bg-primary p"},r.a.createElement("h3",null,"Leave a Comment")),r.a.createElement("form",{className:"form my-1",onSubmit:function(e){e.preventDefault(),l(Object(i.a)(t,s)),u("")}},r.a.createElement("textarea",{name:"text",cols:"30",rows:"5",placeholder:"Create a comment",required:!0,value:s,onChange:function(e){return u(e.target.value)}}),r.a.createElement("input",{type:"submit",className:"btn btn-dark my-1",value:"Submit"})))},f=n(139),d=n.n(f),b=n(9),v=n(10),E=n(52);function y(){var e=Object(b.a)(["\n  margin-left: auto;\n  padding: 5px;\n  background: #dc3545;\n  border: none;\n  cursor: pointer;\n  color: #fff;\n"]);return y=function(){return e},e}function h(){var e=Object(b.a)(["\n  display: flex;\n  flex-direction: column;\n  margin-left: 20px;\n  & > time {\n    font-size: 12px;\n    opacity: 0.7;\n    margin-top: 15px;\n  }\n"]);return h=function(){return e},e}function x(){var e=Object(b.a)(["\n  text-transform: capitalize;\n\n  font-size: 12px;\n"]);return x=function(){return e},e}function O(){var e=Object(b.a)(["\n  width: 50px;\n  height: 50px;\n  border-radius: 50%;\n"]);return O=function(){return e},e}function g(){var e=Object(b.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n"]);return g=function(){return e},e}function j(){var e=Object(b.a)(["\n  display: flex;\n  padding: 10px 20px;\n  align-items: center;\n  border: 2px dashed #ccc;\n  margin-top: 15px;\n  background: #eee;\n"]);return j=function(){return e},e}var _=Object(v.c)(E.b.div)(j()),k=Object(v.c)(u.b)(g()),w=v.c.img(O()),N=v.c.p(x()),T=v.c.div(h()),S=v.c.button(y()),C={hidden:{x:"100vw",opacity:0},visible:{x:0,opacity:1,transition:{type:"spring"}},exit:{x:"-100vw",transition:{ease:"easeInOut"}}},I=function(e){var t=e.comment,n=t.text,a=t.date,c=t._id,s=t.user,u=e.postId,l=Object(o.b)(),p=Object(o.c)((function(e){return e.auth}));return r.a.createElement(_,{variants:C,initial:"hidden",animate:"visible",exit:"exit"},r.a.createElement(k,{to:"/profile/".concat(s._id)},r.a.createElement(w,{className:"round-img",src:"/".concat(s&&s.avatar),alt:""}),r.a.createElement(N,null,s&&s.name)),r.a.createElement(T,null,r.a.createElement("h4",null,n),r.a.createElement(d.a,{format:"YYYY-MM-DD HH:mm"},a)),p.isAuthenticated&&p.user._id===s._id||p.user&&"admin"===p.user.role?r.a.createElement(S,{onClick:function(){return l(Object(i.e)(u,c))}},"delete"):"")};t.default=function(){var e=Object(s.i)().id,t=Object(o.b)(),n=Object(o.c)((function(e){return e.post}));return Object(a.useEffect)((function(){t(Object(i.f)(e))}),[t]),n.onePost||n.loadingOnePost?n.loadingOnePost?r.a.createElement(c.a,null):r.a.createElement(a.Fragment,null,r.a.createElement(u.b,{to:"/posts",className:"btn btn-light"},"Back to posts"),r.a.createElement(l.a,n.onePost),r.a.createElement(m,{postId:n.onePost._id}),r.a.createElement(E.a,null,n.onePost.comments.map((function(e){return r.a.createElement(I,{key:e._id,comment:e,postId:n.onePost._id})})))):r.a.createElement(s.a,{to:"/error"})}}}]);
//# sourceMappingURL=12.449e5c17.chunk.js.map