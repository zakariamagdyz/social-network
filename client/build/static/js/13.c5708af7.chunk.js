(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[13],{132:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n(55);function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],a=!0,r=!1,c=void 0;try{for(var i,o=e[Symbol.iterator]();!(a=(i=o.next()).done)&&(n.push(i.value),!t||n.length!==t);a=!0);}catch(s){r=!0,c=s}finally{try{a||null==o.return||o.return()}finally{if(r)throw c}}return n}}(e,t)||Object(a.a)(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},136:function(e,t,n){"use strict";n.d(t,"g",(function(){return l})),n.d(t,"f",(function(){return p})),n.d(t,"d",(function(){return f})),n.d(t,"b",(function(){return d})),n.d(t,"c",(function(){return m})),n.d(t,"a",(function(){return b})),n.d(t,"e",(function(){return v})),n.d(t,"h",(function(){return h}));var a=n(21),r=n.n(a),c=n(32),i=n(8),o=n(20),s=n.n(o),u=n(28),l=function(){return function(){var e=Object(c.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.a.get("/api/v1/posts");case 3:n=e.sent,t({type:i.a.FETCH_POSTS,payload:n.data}),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),t({type:i.a.FETCH_POSTS_FAILED}),t(Object(u.b)(e.t0.response.data.message,"danger"));case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},p=function(e){return function(){var t=Object(c.a)(r.a.mark((function t(n){var a;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,s.a.get("/api/v1/posts/".concat(e));case 3:a=t.sent,n({type:i.a.FETCH_A_POST,payload:a.data}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),n({type:i.a.FETCH_A_POST_FAILED});case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},f=function(e){return function(){var t=Object(c.a)(r.a.mark((function t(n){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,s.a.delete("/api/v1/posts/".concat(e));case 3:t.sent,n({type:i.a.DELETE_POST,payload:e}),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),n({type:i.a.DELETE_POST_FAILED}),n(Object(u.b)(t.t0.response.data.message,"danger"));case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},d=function(e){return function(){var t=Object(c.a)(r.a.mark((function t(n){var a;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,s.a.post("/api/v1/posts/".concat(e,"/like"));case 3:a=t.sent,n({type:i.a.UPDATE_LIKES,payload:{id:e,data:a.data}}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),n(Object(u.b)(t.t0.response.data.message,"danger"));case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},m=function(e){return function(){var t=Object(c.a)(r.a.mark((function t(n){var a,c,o;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a={headers:{"Content-Type":"application/json"}},c=JSON.stringify({text:e}),t.prev=2,t.next=5,s.a.post("/api/v1/posts",c,a);case 5:o=t.sent,n({type:i.a.CREATE_POST,payload:o.data}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),n(Object(u.b)(t.t0.response.data.message,"danger"));case 12:case"end":return t.stop()}}),t,null,[[2,9]])})));return function(e){return t.apply(this,arguments)}}()},b=function(e,t){return function(){var n=Object(c.a)(r.a.mark((function n(a){var c,o,l;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c=JSON.stringify({text:t}),o={headers:{"Content-Type":"application/json"}},n.prev=2,n.next=5,s.a.post("/api/v1/posts/".concat(e,"/comments"),c,o);case 5:l=n.sent,a({type:i.a.ADD_COMMENT,payload:l.data}),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(2),a(Object(u.b)(n.t0.response.data.message,"danger"));case 12:case"end":return n.stop()}}),n,null,[[2,9]])})));return function(e){return n.apply(this,arguments)}}()},v=function(e,t){return function(){var n=Object(c.a)(r.a.mark((function n(a){return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,s.a.delete("/api/v1/posts/".concat(e,"/").concat(t));case 3:a({type:i.a.REMOVE_COMMENT,payload:t}),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),a(Object(u.b)(n.t0.response.data.message,"danger"));case 9:case"end":return n.stop()}}),n,null,[[0,6]])})));return function(e){return n.apply(this,arguments)}}()},h=function(e){return function(){var t=Object(c.a)(r.a.mark((function t(n){var a;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:i.a.GET_LIKES_START}),t.next=4,s.a.get("/api/v1/posts/".concat(e,"/likes"));case 4:a=t.sent,n({type:i.a.GET_LIKES,payload:a.data}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),n({type:i.a.GET_LIKES_FAILED});case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()}},182:function(e,t,n){"use strict";var a=n(0),r=n.n(a),c=n(139),i=n.n(c),o=n(12),s=n(22),u=n(136),l=n(52),p={hidden:{x:"100vw",opacity:0},visible:{x:0,opacity:1,transition:{type:"spring"}},exit:{x:"-100vw",transition:{ease:"easeInOut"}}};t.a=function(e){var t=e._id,n=e.text,a=e.likes,c=e.comments,f=e.date,d=e.user,m=e.showActions,b=e.toggleModal,v=e.postId,h=Object(s.b)(),y=Object(s.c)((function(e){return e.auth}));return r.a.createElement(l.b.div,{className:"post bg-white p-1 my-1",variants:p,initial:"hidden",animate:"visible",exit:"exit"},r.a.createElement("div",{className:"post__user"},r.a.createElement(o.b,{to:"/profile/".concat(d._id)},r.a.createElement("img",{className:"round-img",src:"/".concat(d&&d.avatar),alt:""}),r.a.createElement("h4",null,d&&d.name))),r.a.createElement("div",{className:"post__data"},r.a.createElement("p",{className:"my-1"},n),r.a.createElement(i.a,{format:"YYYY-MM-DD h:mm a",className:"time"},f)),m&&r.a.createElement("div",{className:"post__actions"},r.a.createElement("div",{className:"post__actions__like"},a.length>0&&r.a.createElement("button",{type:"button",className:"btn btn-light free",onClick:function(){b(),v(t)}},r.a.createElement("i",{className:"fas fa-thumbs-up"})," ",r.a.createElement("span",null,a.length," ")),a.find((function(e){return e.user===y.user._id}))?r.a.createElement("button",{className:"btn btn-liked",onClick:function(){return h(Object(u.b)(t))}},"liked"):r.a.createElement("button",{className:"btn btn-light btn-unliked",onClick:function(){return h(Object(u.b)(t))}},"like")),r.a.createElement(o.b,{to:"/posts/".concat(t),className:"btn btn-primary"},"Discussion"," ",c.length>0&&r.a.createElement("span",{className:"comment-count"},c.length)),y.isAuthenticated&&y.user._id===d._id||y.user&&"admin"===y.user.role?r.a.createElement("button",{type:"button",className:"btn btn-danger",onClick:function(){return h(Object(u.d)(t))}},r.a.createElement("i",{className:"fas fa-times"})):""))}},333:function(e,t,n){"use strict";n.r(t);var a=n(21),r=n.n(a),c=n(32),i=n(132),o=n(0),s=n.n(o),u=n(136),l=n(53),p=n(22),f=n(182),d=function(){var e=Object(o.useState)(""),t=Object(i.a)(e,2),n=t[0],a=t[1],r=Object(p.b)();return s.a.createElement("div",{className:"post-form"},s.a.createElement("div",{className:"bg-primary p"},s.a.createElement("h3",null,"Say Something...")),s.a.createElement("form",{className:"form my-1",onSubmit:function(e){e.preventDefault(),r(Object(u.c)(n)),a("")}},s.a.createElement("textarea",{name:"text",cols:"30",rows:"5",placeholder:"Create a post",required:!0,value:n,onChange:function(e){return a(e.target.value)}}),s.a.createElement("input",{type:"submit",className:"btn btn-dark my-1",value:"Submit"})))},m=n(26),b=n.n(m),v=n(9),h=n(10),y=n(52);function E(){var e=Object(v.a)(["\n  text-transform: capitalize;\n"]);return E=function(){return e},e}function g(){var e=Object(v.a)(["\n  width: 80px;\n  height: 80px;\n  border-radius: 50%;\n"]);return g=function(){return e},e}function x(){var e=Object(v.a)(["\n  margin-right: 20px;\n"]);return x=function(){return e},e}function O(){var e=Object(v.a)(["\n  display: flex;\n  align-items: center;\n  border-bottom: 1px solid #ccc;\n  margin-top: 15px;\n"]);return O=function(){return e},e}function j(){var e=Object(v.a)(["\n  position: fixed;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  background: rgba(0, 0, 0, 0.5);\n  z-index: 20;\n"]);return j=function(){return e},e}function k(){var e=Object(v.a)(["\n  height: 60px;\n  display: flex;\n  margin-top: auto;\n  align-items: center;\n  flex-direction: row-reverse;\n"]);return k=function(){return e},e}function w(){var e=Object(v.a)(["\n  display: flex;\n  flex-direction: column;\n  padding: 20px;\n"]);return w=function(){return e},e}function _(){var e=Object(v.a)(["\n  background: #343a40;\n  height: 65px;\n  width: 100%;\n  padding: 10px;\n"]);return _=function(){return e},e}function N(){var e=Object(v.a)(["\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  width: 50%;\n  height: 70vh;\n  margin: 15vh auto;\n  display: flex;\n  z-index: 999;\n  background: #fff;\n  overflow: auto;\n"]);return N=function(){return e},e}var S=Object(h.c)(y.b.div)(N()),T=h.c.div(_()),C=h.c.div(w()),A=h.c.div(k()),I=Object(h.c)(y.b.div)(j()),D=h.c.div(O()),P=h.c.figure(x()),L=h.c.img(g()),M=h.c.h4(E()),F={visible:{opacity:1},hidden:{opacity:0}},H={hidden:{y:"-100vh",opacity:0},visible:{y:"0",opacity:1,transition:{delay:.5}}},J=function(e){var t=e.postId,n=e.toggleModal,a=Object(p.b)(),r=Object(p.c)((function(e){return e.post})),c=r.allLikes,i=r.loadingLikes;Object(o.useEffect)((function(){a(Object(u.h)(t))}),[]);var f=s.a.createElement(I,{onClick:n,variants:F,initial:"hidden",animate:"visible",exit:"hidden"},s.a.createElement(S,{variants:H},s.a.createElement(T,null,s.a.createElement("h1",{style:{color:"#fff"}},"People who likes the post")),s.a.createElement(C,null,i?s.a.createElement(l.a,null):c.filter((function(e){return!!e.user})).map((function(e){return s.a.createElement(D,{key:e.id},s.a.createElement(P,null,s.a.createElement(L,{src:e.user.avatar,alt:""})),s.a.createElement(M,null,e.user.name))}))),s.a.createElement(A,null,s.a.createElement("button",{className:"btn btn-info",onClick:n},"Close"))));return b.a.createPortal(f,document.getElementById("modal-hook"))},K=n(20),Y=n.n(K),z={hidden:{x:"100vw",opacity:0},visible:{x:0,opacity:1,transition:{type:"spring"}}};t.default=function(){var e=Object(o.useState)(!1),t=Object(i.a)(e,2),n=t[0],a=t[1],m=Object(o.useState)(null),b=Object(i.a)(m,2),v=b[0],h=b[1],E=function(){return a(!n)},g=function(e){return h(e)},x=Object(p.b)(),O=Object(p.c)((function(e){return e.post})),j=O.allPosts,k=O.loadingAllPosts;return Object(o.useEffect)((function(){x(Object(u.g)())}),[x]),Object(o.useEffect)((function(){Object(c.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Y.a.get("/api/v1/users/auth");case 3:t=e.sent,console.log(t.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0.data.response.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))()}),[]),k?s.a.createElement(l.a,null):s.a.createElement(y.b.div,{variants:z,initial:"hidden",animate:"visible"},s.a.createElement(y.a,null,n&&s.a.createElement(J,{toggleModal:E,postId:v})),s.a.createElement("h1",{className:"large text-primary"},"Posts"),s.a.createElement("p",{className:"lead"},s.a.createElement("i",{className:"fa fa-users"})," Welcome to the commuinity"),s.a.createElement(d,null),s.a.createElement(y.a,null,j.map((function(e){return s.a.createElement(f.a,Object.assign({key:e._id},e,{showActions:!0,toggleModal:E,postId:g}))}))))}}}]);
//# sourceMappingURL=13.c5708af7.chunk.js.map